(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{8785:function(n,e,t){"use strict";var r=t(5893);e.Z=function(n){var e=n.children,t=n.state,a=n.className,c=void 0===a?"":a,s=n.onClick;return(0,r.jsx)("button",{onClick:s,className:"".concat(c," border-black box-sizing border-[3px] rounded-xl px-[17px] py-[15px] font-semibold text-center leading-none ").concat("solid"===t?"bg-black text-gray-0":""),children:e})}},1932:function(n,e,t){"use strict";var r=t(5893);e.Z=function(n){var e=n.children,t=n.noShadow,a=n.className,c=n.onClick;return(0,r.jsx)("div",{className:"".concat(a," rounded-xl border-4 border-black p-4 ").concat(t?"":"oblique-shadow mr-[8px] mb-[8px]"),onClick:c,children:e})}},490:function(n,e,t){"use strict";var r=t(5893);e.Z=function(){return(0,r.jsxs)("div",{className:"lds-spinner",children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{})]})}},9407:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return g}});var r=t(5893),a=t(809),c=t.n(a),s=t(2447),i=t(7294),o=t(1122),u=t(5733),l=t.n(u),d=t(3162),f=t(8785),p=t(1932),x=t(4062),v=t(9999),h=t(4121),j=function(n,e){return e.map((function(e,t){return"".concat(n," ").concat(t+1)}))},m=t(490),g=function(){var n=(0,i.useState)(""),e=n[0],t=n[1],a=(0,i.useState)(""),u=a[0],g=a[1],w=(0,i.useState)(!1),b=w[0],Z=w[1],N=(0,i.useState)(null),k=N[0],y=N[1],_=o.Z.auth();(0,i.useEffect)((function(){y(_.currentUser)}),[_.currentUser]);var C=!e.length||!u.length,E=function(){var n=(0,s.Z)(c().mark((function n(){var e,t,r,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Z(!0),n.prev=1,n.next=4,(0,x.Y)();case 4:return e=n.sent,t="CONstituionLAB_".concat((new Date).toLocaleString("th-TH",{dateStyle:"short"}).split("/").join("_")),r=new(l()),(c=e,c.reduce((function(n,e){if(!e)return n;var t=Object.entries(e),r=t.map((function(n){var e=(0,h.Z)(n,2),t=e[0],r=e[1],a=r.submitAt,c=r.answers,s=r.suggestedOptions,i=r.finalOptions,o=r.feedback;return[t].concat((0,v.Z)(new Date(a).toLocaleString().split(", ")),(0,v.Z)(c),(0,v.Z)(s),(0,v.Z)(i),[o]).join(",")})),a=t[0][1],c=a.answers,s=a.suggestedOptions,i=a.finalOptions,o=["id","date","time"].concat((0,v.Z)(j("answer",c)),(0,v.Z)(j("suggestedOption",s)),(0,v.Z)(j("finalOption",i)),["feedback"]);return[].concat((0,v.Z)(n),[[o].concat((0,v.Z)(r)).join("\n")])}),[])).forEach((function(n,e){return r.file("".concat(t,"/topic-").concat(e+1,".csv"),n)})),n.next=10,r.generateAsync({type:"blob"});case 10:a=n.sent,(0,d.saveAs)(a,"".concat(t,".zip")),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(1),alert(n.t0);case 17:return n.prev=17,Z(!1),n.finish(17);case 20:case"end":return n.stop()}var c}),n,null,[[1,14,17,20]])})));return function(){return n.apply(this,arguments)}}();return(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:b?(0,r.jsx)(m.Z,{}):(0,r.jsxs)(p.Z,{className:"space-y-4 w-96",children:[(0,r.jsx)("h1",{className:"text-headline-1",children:"Admin"}),k?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(f.Z,{state:"solid",className:"w-full",onClick:E,children:"Download participants result"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"text",className:"bg-gray-100 rounded-xl w-full p-4",placeholder:"Email",value:e,onChange:function(n){return t(n.target.value)}}),(0,r.jsx)("input",{type:"password",className:"bg-gray-100 rounded-xl w-full p-4",placeholder:"Password",value:u,onChange:function(n){return g(n.target.value)}}),(0,r.jsx)(f.Z,{state:"solid",className:"w-full ".concat(C?"opacity-50":""),onClick:function(){return!C&&(Z(!0),void _.signInWithEmailAndPassword(e,u).then((function(n){var e=n.user;return y(e)})).catch((function(n){var e=n.code,t=n.message;return alert("Error ".concat(e,": ").concat(t))})).finally((function(){return Z(!1)})))},children:"Log in"})]})]})})}},2347:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(9407)}])}},function(n){n.O(0,[504,834,534,774,888,179],(function(){return e=2347,n(n.s=e);var e}));var e=n.O();_N_E=e}]);